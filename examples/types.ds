#[
    Typed Example (optional)

    Dragonstone stays dynamically typed by default, but you can opt 
    into stricter checks when you need them:

    Pass `--typed` to the CLI 
    (`dragonstone run --typed examples/types.ds`) 
    to enable type checking for that run.

    Or add `#! typed` 
    at the top of a file to force typed mode for 
    that module, no flags then are required.

    Typed code lets you annotate variables, function 
    parameters, and return values 
    (`name: str`, `def greet(user: User?) -> str`, unions like `str | nil`, etc.)
]#

#[
    # TODO: Pragma might be broken? With or without the pragma the types work, 
    # TODO: but throws error as unknown if using. Spec works and the --typed flag works, investigate.

    nil     = null/nil
    bool    = Boolean
    int     = Integer                           # TODO: add support for different signed/unsigned, right now just catch all.
    float   = float                             # TODO: same here as int but for float 32/64. (could just expand through ffi without me needing too?)
    char    = Character
    str     = String
    sym     = Symbol
    arr     = Array (both arr and array work)   # DONE: Named Array fixed.
    map     = Map (map aka a hash)              # DONE: Named Map fixed.
    range   = Range                             # TODO: Named Range might be broken, investigate.
    tuple   = Tuple                             # TODO: Named Tuple might be broken, investigate.
    para    = Para (my Proc)
]#

#! typed

# Untyped variable, dynamic typing.
name = "Ringo"
echo name

# Typed variable, with optional strict typing.
name: str = "Jules"
echo name

# Method with typed parameters and return type.
def ğŸ˜±(name: str) -> str
    echo "Hello, #{name}!"
end
ğŸ˜±("Peet")

# Method with dynamic parameters and return type.
def greeting(name)
    echo "Hello, #{name}!"
end
greeting("V")

# Union type example (an argument can be a String or Nil).
def greet(country: str | nil) -> str
    if country.nil?
        echo "Ahhh, I don't know where I'm from!"
    else
        echo "Hello, I'm from #{country}!"
    end
end

greet(nil)
greet("Portugal")

# A nullable shorthand with ?
def find_user(id: int) -> User?
    # Would return user or nil.
end
